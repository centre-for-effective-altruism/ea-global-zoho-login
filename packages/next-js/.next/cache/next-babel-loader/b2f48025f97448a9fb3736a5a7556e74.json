{"ast":null,"code":"var _jsxFileName = \"/Users/sam/Sites/ea/ea-global-zoho-login/packages/next-js/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState, useEffect } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport Page from 'components/Page';\nimport Divider from '@material-ui/core/Divider';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/styles';\n/*\nimport LoginIcon from '@material-ui/icons/Lock'\nimport ExitIcon from '@material-ui/icons/ExitToApp'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\n*/\n\nconst LoginIcon = () => null;\n\nconst ExitIcon = () => null;\n\nconst ChevronRightIcon = () => null;\n\nconst useStyles = makeStyles(theme => ({\n  welcomeText: {\n    marginBottom: theme.spacing(6)\n  }\n}));\nexport default function Home({\n  user\n}) {\n  const {\n    0: me,\n    1: setMe\n  } = useState(null);\n  const {\n    0: zohoUrl,\n    1: setZohoUrl\n  } = useState(null);\n\n  const getMe = async () => {\n    const res = await fetch('/api/auth/me');\n\n    if (res.ok) {\n      setMe(await res.json());\n    }\n  };\n\n  const getZohoUrl = async me => {\n    const res = await fetch('/api/zoho/update-token');\n\n    if (res.ok) {\n      const {\n        zohoUrl\n      } = await res.json();\n      setZohoUrl(zohoUrl);\n    }\n  };\n\n  useEffect(() => {\n    getMe();\n  }, []);\n  useEffect(() => {\n    if (me && me.email_verified) getZohoUrl();\n  }, [me]);\n  const classes = useStyles();\n  return __jsx(Page, {\n    pageTitle: \"Welcome\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 5\n    }\n  }, __jsx(Typography, {\n    align: \"center\",\n    variant: \"h2\",\n    component: \"h1\",\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }\n  }, \"Apply to attend EA Global\"), __jsx(Grid, {\n    container: true,\n    spacing: 6,\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, __jsx(Grid, {\n    item: true,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, me && __jsx(\"div\", {\n    className: classes.welcomeText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 18\n    }\n  }, __jsx(Typography, {\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, \"Hey \", me.given_name || me.email, me.given_name && ` (${me.email})`, \"!\"), me && !me.email_verified ? __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, \"You need to verify your email! \", __jsx(Link, {\n    href: window.location.href,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 60\n    }\n  }, \"I've done this.\")) : __jsx(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }, \"If you're ready to start your application, click 'Get Started'.\")), __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, !me ? __jsx(React.Fragment, null, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    fullWidth: true,\n    href: \"/api/auth/login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 36\n    }\n  }, \"Login / Sign up \", __jsx(LoginIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 129\n    }\n  }))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, __jsx(Typography, {\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 19\n    }\n  }, \"Log in to your EffectiveAltruism.org account to get started.\"), __jsx(Typography, {\n    gutterBottom: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, \"If you've ever used \", __jsx(Link, {\n    href: \"https://app.effectivealtruism.org/funds\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 41\n    }\n  }, \"EA Funds\"), \" or taken a Pledge with \", __jsx(Link, {\n    href: \"https://www.givingwhatwecan.org\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 41\n    }\n  }, \"Giving What We Can\"), \", you already have an account (just sign in using the same details). Otherwise, just sign up for a new account.\"))) : __jsx(React.Fragment, null, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    variant: \"contained\",\n    fullWidth: true,\n    href: \"/api/auth/logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 43\n    }\n  }, \"Logout \", __jsx(ExitIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 112\n    }\n  }))), zohoUrl ? __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, __jsx(Button, {\n    color: \"primary\",\n    variant: \"contained\",\n    fullWidth: true,\n    href: zohoUrl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 47\n    }\n  }, \"Get Started \", __jsx(ChevronRightIcon, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 128\n    }\n  }))) : me.email_verified && __jsx(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 42\n    }\n  }))))));\n}","map":{"version":3,"sources":["/Users/sam/Sites/ea/ea-global-zoho-login/packages/next-js/pages/index.js"],"names":["useState","useEffect","Grid","Typography","Button","Link","Page","Divider","CircularProgress","makeStyles","LoginIcon","ExitIcon","ChevronRightIcon","useStyles","theme","welcomeText","marginBottom","spacing","Home","user","me","setMe","zohoUrl","setZohoUrl","getMe","res","fetch","ok","json","getZohoUrl","email_verified","classes","given_name","email","window","location","href"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport Button from '@material-ui/core/Button'\nimport Link from '@material-ui/core/Link'\nimport Page from 'components/Page'\nimport Divider from '@material-ui/core/Divider'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport { makeStyles } from '@material-ui/styles'\n/*\nimport LoginIcon from '@material-ui/icons/Lock'\nimport ExitIcon from '@material-ui/icons/ExitToApp'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\n*/\nconst LoginIcon = () => null\nconst ExitIcon = () => null\nconst ChevronRightIcon = () => null\n\nconst useStyles = makeStyles(theme => ({\n  welcomeText: {\n    marginBottom: theme.spacing(6)\n  }\n}))\n\nexport default function Home({ user }) {\n  const [me, setMe] = useState(null)\n  const [zohoUrl, setZohoUrl] = useState(null)\n\n  const getMe = async () => {\n    const res = await fetch('/api/auth/me')\n    if (res.ok) {\n      setMe(await res.json())\n    }\n  }\n\n  const getZohoUrl = async (me) => {\n    const res = await fetch('/api/zoho/update-token')\n    if (res.ok) {\n      const { zohoUrl } = await res.json()\n      setZohoUrl(zohoUrl)\n    }\n  }\n\n  useEffect(() => {\n    getMe()\n  }, [])\n\n  useEffect(() => {\n    if (me && me.email_verified) getZohoUrl()\n  }, [me])\n\n  const classes = useStyles()\n\n  return (\n    <Page pageTitle='Welcome'>\n      <Typography align='center' variant='h2' component='h1' gutterBottom>Apply to attend EA Global</Typography>\n      <Grid container spacing={6} justify='center'>\n        <Grid item md={6}>\n          {me && <div className={classes.welcomeText}>\n            <Typography gutterBottom>Hey {me.given_name || me.email}{me.given_name && ` (${me.email})`}!</Typography>\n\n            {me && !me.email_verified\n              ? <Typography>You need to verify your email! <Link href={window.location.href}>I've done this.</Link></Typography>\n              : <Typography>If you're ready to start your application, click 'Get Started'.</Typography>\n            }\n          </div>}\n          <Grid container spacing={1} justify='center'>\n          {!me\n            ? <>\n                <Grid item xs={12}><Button color='primary' variant='contained' fullWidth href='/api/auth/login'>Login / Sign up <LoginIcon /></Button></Grid>\n                <Grid item xs={12}>\n                  <Typography gutterBottom>Log in to your EffectiveAltruism.org account to get started.</Typography>\n                  <Typography gutterBottom>\n                    If you've ever used <Link href='https://app.effectivealtruism.org/funds'>EA Funds</Link> or\n                    taken a Pledge with <Link href='https://www.givingwhatwecan.org'>Giving What We Can</Link>,\n                    you already have an account (just sign in using the same details).\n                    Otherwise, just sign up for a new account.\n                  </Typography>\n                </Grid>\n              </>\n            : <>\n                <Grid item xs={12} md={6}><Button variant='contained' fullWidth href='/api/auth/logout'>Logout <ExitIcon /></Button></Grid>\n                {zohoUrl\n                  ? <Grid item xs={12} md={6}><Button color='primary' variant='contained' fullWidth href={zohoUrl}>Get Started <ChevronRightIcon /></Button></Grid>\n                  : me.email_verified && <CircularProgress />\n                }\n              </>\n          }\n          </Grid>\n        </Grid>\n      </Grid>\n    </Page>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}